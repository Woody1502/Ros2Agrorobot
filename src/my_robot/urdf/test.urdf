<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from robot.xacro                    | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="my_robot">
  <!-- ==================== MACROS ==================== -->
  <!-- ==================== ROBOT STRUCTURE ==================== -->
  <!-- World link -->
  <link name="world"/>
  <link name="base_link">
    <inertial>
      <mass value="500.1"/>
      <inertia ixx="0.31782" ixy="-0.209" ixz="0.00045539" iyy="0.83341" iyz="0.00020479" izz="1.0223"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://my_robot/meshes/base_link.STL"/>
      </geometry>
      <material name="gray_dark">
        <color rgba="0.572 0.576 0.576 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://my_robot/meshes/base_link.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="world_to_base" type="fixed">
    <parent link="world"/>
    <child link="base_link"/>
    <origin rpy="0 0 0" xyz="0 0 1"/>
  </joint>
  <link name="link_f_r">
    <inertial>
      <mass value="30"/>
      <inertia ixx="3.646e-05" ixy="0" ixz="0" iyy="3.419e-05" iyz="2.078e-06" izz="8.809e-06"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_f_r.STL"/>
      </geometry>
      <material name="silver">
        <color rgba="0.776 0.776 0.819 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_f_r.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint_f_r" type="revolute">
    <parent link="base_link"/>
    <child link="link_f_r"/>
    <origin rpy="1.5708 0 3.1403" xyz="-0.11936 0.03 -0.083652"/>
    <axis xyz="0 1 0"/>
    <limit effort="100" lower="-1.57" upper="1.57" velocity="1.0"/>
  </joint>
  <link name="link_f_r_w">
    <inertial>
      <mass value="50"/>
      <inertia ixx="0.003289" ixy="0" ixz="0" iyy="0.003289" iyz="0" izz="0.006109"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_f_r_w.STL"/>
      </geometry>
      <material name="gray">
        <color rgba="0.439 0.411 0.411 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_f_r_w.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint_f_r_w" type="continuous">
    <parent link="link_f_r"/>
    <child link="link_f_r_w"/>
    <origin rpy="0 0 3.1403" xyz="0 -0.0287 0.0315"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="link_f_l">
    <inertial>
      <mass value="30"/>
      <inertia ixx="3.646e-05" ixy="0" ixz="0" iyy="3.419e-05" iyz="2.078e-06" izz="8.809e-06"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_f_l.STL"/>
      </geometry>
      <material name="silver">
        <color rgba="0.776 0.776 0.819 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_f_l.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint_f_l" type="revolute">
    <parent link="base_link"/>
    <child link="link_f_l"/>
    <origin rpy="1.5708 0 -0.0013373" xyz="-0.11936 -0.03 -0.083652"/>
    <axis xyz="0 1 0"/>
    <limit effort="100" lower="-1.57" upper="1.57" velocity="1.0"/>
  </joint>
  <link name="link_f_l_w">
    <inertial>
      <mass value="50"/>
      <inertia ixx="0.003289" ixy="0" ixz="0" iyy="0.003289" iyz="0" izz="0.006109"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_f_l_w.STL"/>
      </geometry>
      <material name="gray">
        <color rgba="0.439 0.411 0.411 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_f_l_w.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint_f_l_w" type="continuous">
    <parent link="link_f_l"/>
    <child link="link_f_l_w"/>
    <origin rpy="0 0 -0.0013373" xyz="0 -0.0287 0.0315"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="link_r_w">
    <inertial>
      <mass value="80"/>
      <inertia ixx="0.010218" ixy="0" ixz="0" iyy="0.010218" iyz="0" izz="0.018926"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_r_w.STL"/>
      </geometry>
      <material name="gray">
        <color rgba="0.439 0.411 0.411 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_r_w.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint_r_w" type="continuous">
    <parent link="base_link"/>
    <child link="link_r_w"/>
    <origin rpy="1.5708 -0.72515 3.1416" xyz="0.12954 0.058 -0.093652"/>
    <axis xyz="0 0 1"/>
  </joint>
  <transmission name="r_transmission">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_r_w">
      <hardwareInterface>Velocity</hardwareInterface>
    </joint>
    <actuator name="r_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <link name="link_l_w">
    <inertial>
      <mass value="80"/>
      <inertia ixx="0.010218" ixy="0" ixz="0" iyy="0.010218" iyz="0" izz="0.018926"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_l_w.STL"/>
      </geometry>
      <material name="gray">
        <color rgba="0.439 0.411 0.411 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_l_w.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint_l_w" type="continuous">
    <parent link="base_link"/>
    <child link="link_l_w"/>
    <origin rpy="1.5708 -1.3692 0" xyz="0.12954 -0.058 -0.093652"/>
    <axis xyz="0 0 1"/>
  </joint>
  <transmission name="l_transmission">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_l_w">
      <hardwareInterface>Velocity</hardwareInterface>
    </joint>
    <actuator name="l_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <link name="link_chair">
    <inertial>
      <mass value="10"/>
      <inertia ixx="1.13e-05" ixy="-3.027e-06" ixz="0" iyy="1.186e-05" iyz="0" izz="1.08e-05"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_chair.STL"/>
      </geometry>
      <material name="gray_light">
        <color rgba="0.698 0.698 0.698 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_chair.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint_chair" type="fixed">
    <parent link="base_link"/>
    <child link="link_chair"/>
    <origin rpy="1.5708 0 0" xyz="0.12954 0 0"/>
  </joint>
  <link name="link_w">
    <inertial>
      <mass value="5"/>
      <inertia ixx="7.867e-07" ixy="0" ixz="0" iyy="7.914e-07" iyz="0" izz="7.867e-07"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_w.STL"/>
      </geometry>
      <material name="gray_light">
        <color rgba="0.698 0.698 0.698 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://my_robot/meshes/link_w.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="joint_w" type="fixed">
    <parent link="base_link"/>
    <child link="link_w"/>
    <origin rpy="1.9409 0.9276 0.45148" xyz="0.002429 0 -0.011517"/>
  </joint>
  <ros2_control name="GazeboSystem" type="system">
    <hardware>
      <plugin>gz_ros2_control/GazeboSimSystem</plugin>
    </hardware>
    <joint name="joint_l_w">
      <command_interface name="velocity">
        <param name="min">-10</param>
        <param name="max">10</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <!-- Wheel motors (velocity control) -->
    <joint name="joint_r_w">
      <command_interface name="velocity">
        <param name="min">-10</param>
        <param name="max">10</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <!-- Steering mechanisms (position control) -->
    <joint name="joint_f_r">
      <command_interface name="position">
        <param name="min">0</param>
        <param name="max">0.5</param>
      </command_interface>
      <state_interface name="position"/>
    </joint>
    <joint name="joint_f_l">
      <command_interface name="position">
        <param name="min">0</param>
        <param name="max">0.5</param>
      </command_interface>
      <state_interface name="position"/>
    </joint>
  </ros2_control>
  <!-- ROS 2 Control plugin -->
  <gazebo>
    <plugin filename="libgz_ros2_control-system.so" name="gz_ros2_control::GazeboSimROS2ControlPlugin">
      <parameters>/home/alexey/ros2_ws/install/my_robot/share/my_robot/config/controllers.yaml</parameters>
    </plugin>
    <plugin filename="gz-sim-diff-drive-system" name="gz::sim::systems::DiffDrive">
      <!-- Wheel Information -->
      <left_joint>joint_l_w</left_joint>
      <right_joint>joint_r_w</right_joint>
      <wheel_separation>0.297</wheel_separation>
      <wheel_radius>0.033</wheel_radius>
      <!-- Limits -->
      <!-- <max_wheel_torque>200</max_wheel_torque> -->
      <max_linear_acceleration>0.33</max_linear_acceleration>
      <!-- Input -->
      <topic>cmd_vel</topic>
      <!-- Output -->
      <frame_id>odom</frame_id>
      <child_frame_id>base_link</child_frame_id>
      <odom_topic>odom</odom_topic>
      <odom_publisher_frequency>30</odom_publisher_frequency>
      <tf_topic>/tf</tf_topic>
    </plugin>
    <!-- <plugin filename="gz-sim-joint-state-publisher-system"
            name="gz::sim::systems::JointStatePublisher">
            <topic>joint_states</topic>
            <joint_name>joint_f_r</joint_name>
            <joint_name>joint_f_l</joint_name>
            <joint_name>joint_r_w</joint_name>
            <joint_name>joint_l_w</joint_name>
            <joint_name>joint_f_r_w</joint_name>
            <joint_name>joint_f_l_w</joint_name>


        </plugin> -->
  </gazebo>
  <!-- Default material -->
  <gazebo reference="base_link">
    <material>Gazebo/Grey</material>
  </gazebo>
</robot>
